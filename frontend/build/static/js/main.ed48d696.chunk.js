(this["webpackJsonpgoodreads-api-project"]=this["webpackJsonpgoodreads-api-project"]||[]).push([[0],{163:function(e,t,a){},201:function(e,t){},203:function(e,t){},213:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a(0),n=a.n(c),o=a(42),s=a.n(o),i=(a(163),a(7)),b=a(44),j=a(12),u=(a(68),a(10)),l=a.n(u),d=a(17),h=a(50),O=a.n(h),p=a(24),x=a(147),g=a(225),m=Object(c.createContext)({});var f=function(e){var t=e.publication_year,a=e.averageRating,n=e.bookImage,o=e.title,s=Object(c.useContext)(m),j=Object(i.a)(s,2),u=(j[0],j[1]);return Object(r.jsxs)("div",{className:"bookCard",children:[Object(r.jsx)(x.a,{floated:"right",size:"mini",className:"bookImage",src:n}),Object(r.jsx)("div",{className:"boldy",children:Object(r.jsx)("b",{children:"Title "})}),Object(r.jsx)("div",{className:"boldy2",children:o}),Object(r.jsx)("div",{className:"boldy",children:Object(r.jsx)("b",{children:"Publication year "})}),Object(r.jsx)("div",{className:"boldy2",children:t}),Object(r.jsx)("div",{className:"boldy",children:Object(r.jsx)("b",{children:"Average Rating "})}),Object(r.jsx)("div",{className:"boldy2",children:a}),Object(r.jsx)(g.a,{className:"button",as:b.b,to:"/".concat(o),children:Object(r.jsx)(g.a,{color:"blue",basic:!0,value:o,onClick:function(e){return u(e.currentTarget.value)},children:"View"},o.id)})]})},v=Object(c.createContext)({}),k=a(92).parseString,y=function(){var e=Object(c.useContext)(v),t=Object(i.a)(e,2),a=t[0];t[1];console.log(a),Object(c.useEffect)((function(){var e=!0,t="";return t=void 0===a?1265:a,function(){var a=Object(d.a)(l.a.mark((function a(){var r,c,n,o,s,i,j;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r="",!e){a.next=5;break}return a.next=4,O()("https://www.goodreads.com/author/show/".concat(t,"?format=xml&key=").concat("ALVzK8NwSNC6KG0i7LIMgg"));case 4:r=a.sent;case 5:c=[],n="",o="","",s="",i="",j=r.data,k(j,(function(e,t){n=t.GoodreadsResponse.author[0].about[0],o=t.GoodreadsResponse.author[0].books[0].book,i=t.GoodreadsResponse.author[0].name[0],s=t.GoodreadsResponse.author[0].image_url[0],t.GoodreadsResponse.author[0].books[0];for(var a=0;a<o.length;a++)c.push({about_book:o[a].description[0].replace(/<[^>]*>?/gm,"").replace(/(?:https?|ftp):\/\/[\n\S]+/g,""),averageRating:o[a].average_rating[0],bookImage:o[a].image_url[0],link:o[a].link[0],num_pages:o[a].num_pages[0],publication_year:o[a].publication_year[0],title:o[a].title[0],uri:o[a].uri[0],authors:o[a].authors[0],ratings_count:o[a].ratings_count[0]})})),N(c),b(s),R(i),g(n.replace(/<[^>]*>?/gm,"").replace(/(?:https?|ftp):\/\/[\n\S]+/g,"").replaceAll(/-/gi,""));case 17:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()(),function(){e=!1}}),[]);var n=Object(c.useState)(""),o=Object(i.a)(n,2),s=o[0],b=o[1],j=Object(c.useState)([]),u=Object(i.a)(j,2),h=u[0],g=u[1],m=Object(c.useState)([]),y=Object(i.a)(m,2),S=y[0],N=y[1],_=Object(c.useState)([]),w=Object(i.a)(_,2),C=w[0],R=w[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{className:"title",children:C}),Object(r.jsx)(x.a,{size:"mini",src:s}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"container-2",children:[Object(r.jsx)("div",{className:"description",style:{fontSize:12},children:h||"Sorry, there is no description for this author :("}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{className:"container-1",children:S.sort((function(e,t){return parseFloat(t.averageRating)-parseFloat(e.averageRating)})).map((function(e){var t;return Object(r.jsx)("div",(t={className:"col-md-6"},Object(p.a)(t,"className","boxer"),Object(p.a)(t,"children",Object(r.jsx)(f,{title:e.title,bookImage:e.bookImage,about_book:e.about_book,averageRating:e.averageRating,publication_year:e.publication_year})),t),e.title)}))})]}),Object(r.jsx)("br",{})]})},S=a(148),N=Object(c.createContext)({}),_=a(92).parseString,w=function(){var e=Object(c.useContext)(N),t=Object(i.a)(e,2),a=t[0],o=t[1];String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};var s="";try{s=a.toProperCase()}catch(C){s="Jane Austen"}Object(c.useEffect)((function(){new AbortController;(function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,r,c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()("https://www.goodreads.com/search/index.xml?key=".concat("ALVzK8NwSNC6KG0i7LIMgg","&q=").concat(s));case 2:t=e.sent,a="",r=[],[],n=t.data,_(n,(function(e,t){if(a=t.GoodreadsResponse.search[0].results[0].work)for(var c=0;c<a.length;c++)r.push({author2:a[c].best_book[0].author[0].name[0],authorId:a[c].best_book[0].author[0].id[0]._})})),c=r.filter((function(e){return e.author2===s}));try{h(c[0].authorId)}catch(o){m("error")}case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);var b=Object(c.useContext)(v),j=Object(i.a)(b,2),u=j[0],h=j[1],p=Object(c.useState)(""),x=Object(i.a)(p,2),g=x[0],m=x[1],f=Object(S.a)(),k=f.register,w=(f.errors,f.handleSubmit);return n.a.useEffect((function(){localStorage.setItem("chosen-author",JSON.stringify(u))})),Object(r.jsxs)("div",{className:"home",children:[Object(r.jsx)("br",{}),Object(r.jsx)("div",{children:Object(r.jsx)("h1",{className:"title",children:"Goodreads API Search"})}),Object(r.jsx)("div",{className:"title",children:"Search for your favourite author!"}),Object(r.jsx)("br",{}),Object(r.jsxs)("form",{onSubmit:w((function(e){m(""),o(e.author.toString())})),children:[Object(r.jsx)("input",{type:"text",placeholder:"e.g. Plato",name:"author",ref:k({required:!0})}),Object(r.jsx)("input",{type:"submit"})]}),Object(r.jsx)("div",{}),g?Object(r.jsx)("div",{className:"sorry",children:"Sorry, we couldn't find what you were looking for. Search again!"}):Object(r.jsx)(y,{authy:u},u),Object(r.jsx)("br",{})]})},C=a(92).parseString,R=function(){var e=Object(c.useContext)(m),t=Object(i.a)(e,2),a=t[0],n=(t[1],Object(c.useContext)(v)),o=Object(i.a)(n,2),s=o[0];o[1];Object(c.useEffect)((function(){var e=s;(function(){var t=Object(d.a)(l.a.mark((function t(){var r,c,n,o,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O()("https://www.goodreads.com/author/show/".concat(e,"?format=xml&key=").concat("ALVzK8NwSNC6KG0i7LIMgg"));case 2:r=t.sent,c=[],n="",o="",s="",i=r.data,C(i,(function(e,t){n=t.GoodreadsResponse.author[0].about[0],o=t.GoodreadsResponse.author[0].books[0].book,s=t.GoodreadsResponse.author[0].name[0];for(var r=0;r<o.length;r++)c.push({about_book:o[r].description[0].replace(/<[^>]*>?/gm,"").replace(/(?:https?|ftp):\/\/[\n\S]+/g,""),averageRating:o[r].average_rating[0],bookImage:o[r].image_url[0],link:o[r].link[0],num_pages:o[r].num_pages[0],publication_year:o[r].publication_year[0],title:o[r].title[0],uri:o[r].uri[0],authors:t.GoodreadsResponse.author[0].name[0],ratings_count:o[r].ratings_count[0]});k(c.filter((function(e){return e.title===a}))[0])})),console.log(n.replace(/<[^>]*>?/gm,"").replace(/(?:https?|ftp):\/\/[\n\S]+/g,"")),_(s),h(n.replace(/<[^>]*>?/gm,"").replace(/(?:https?|ftp):\/\/[\n\S]+/g,""));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[s]);var j=Object(c.useState)([]),u=Object(i.a)(j,2),h=(u[0],u[1]),p=Object(c.useState)([]),g=Object(i.a)(p,2),f=g[0],k=g[1],y=Object(c.useState)([]),S=Object(i.a)(y,2),N=S[0],_=S[1];return Object(r.jsxs)("div",{className:"home",children:[Object(r.jsx)("br",{}),Object(r.jsx)(b.b,{as:b.b,to:"/",children:"Home"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("br",{}),Object(r.jsx)(x.a,{src:f.bookImage}),Object(r.jsxs)("div",{children:[Object(r.jsx)("br",{}),f.title," by ",N]}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{className:"authorDescription",children:f.about_book?f.about_book:"Sorry, there is no description for this book :("}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"authorDescription",children:[Object(r.jsx)("b",{children:"Author(s):"})," ",f.authors]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"authorDescription",children:[Object(r.jsx)("b",{children:"Publication Year:"})," ",f.publication_year]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"authorDescription",children:[Object(r.jsx)("b",{children:"Page Count:"})," ",f.num_pages]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"authorDescription",children:[Object(r.jsx)("b",{children:"Ratings Count"})," ",f.ratings_count]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"authorDescription",children:[Object(r.jsx)("b",{children:"Average Rating:"})," ",f.averageRating]})]}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})},I=function(){var e=Object(c.useState)(),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(),s=Object(i.a)(o,2),u=s[0],l=s[1],d=Object(c.useState)(),h=Object(i.a)(d,2),O=h[0],p=h[1];return Object(r.jsx)(N.Provider,{value:[O,p],children:Object(r.jsx)(v.Provider,{value:[a,n],children:Object(r.jsx)(m.Provider,{value:[u,l],children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(j.b,{exact:!0,path:"/",component:w}),Object(r.jsx)(j.b,{exact:!0,path:"/:book",component:R}),Object(r.jsx)(j.b,{render:function(){return Object(r.jsx)(j.a,{to:{pathname:"/"}})}})]})})})})},G=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,227)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,o=t.getTTFB;a(e),r(e),c(e),n(e),o(e)}))};s.a.render(Object(r.jsx)(I,{}),document.getElementById("root")),G()},68:function(e,t,a){}},[[213,1,2]]]);
//# sourceMappingURL=main.ed48d696.chunk.js.map